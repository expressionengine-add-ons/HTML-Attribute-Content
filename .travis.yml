language: php

php:
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - 7.1

install:
  - composer install

script:
  - html_attribute_content/vendor/bin/parallel-lint --exclude html_attribute_content/vendor .

before_deploy:
  - rm -rf html_attribute_content/vendor
  - zip -r 'HTML Attribute Content' html_attribute_content

deploy:
  provider: releases
  api_key:
    secure: aEhHKALak8GIvqlpiroAgbw86HaGmZHoy8lPEy55BPcwTX5siP9IQ1Kx657UNMQXWv17SHZFXakBJ0vCGOKKJjBmGwOki1K96rsoFA96VZiis8KA2hg4Anzd6ZuaMp87kSF9gEA0Wyq2zzf4OhEdMF19lLpjpkpgM9t75s6Bu4g=
  file: "HTML Attribute Content.zip"
  skip_cleanup: true
  on:
    php: 7.1
    tags: true
    condition: $TRAVIS_PULL_REQUEST = false
    repo: expressionengine-add-ons/HTML-Attribute-Content
