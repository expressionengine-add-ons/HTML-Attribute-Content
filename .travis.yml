language: php

php:
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - 7.1

install:
  - composer install

script:
  - html_attribute_content/vendor/bin/parallel-lint --exclude html_attribute_content/vendor .

before_deploy:
  - rm -rf html_attribute_content/vendor
  - zip -r 'HTML Attribute Content' html_attribute_content

deploy:
  provider: releases
  api_key:
    secure: WXw3tQ4HFASBI6ZTvf/zCGTznzISs9JFHLMo0f7bIJ5DTFM2QGQDp+HEb7kMb5atcC5ncQ38xawmdGsgjxI4Hcck8PDKbr1B+hQlN/CbBY61beU8zudSurJwLl9HoPHHZAQORgzH1TZXh0gTEQmJEqjp4rrhM+chmi5wnfTbllA=
  file: "HTML Attribute Content.zip"
  skip_cleanup: true
  on:
    php: 7.1
    tags: true
    condition: $TRAVIS_PULL_REQUEST = false
    repo: expressionengine-add-ons/HTML-Attribute-Content
