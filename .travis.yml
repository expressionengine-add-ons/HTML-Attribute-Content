language: php

php:
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - 7.1

install:
  - composer install

script:
  - html_attribute_content/vendor/bin/parallel-lint --exclude html_attribute_content/vendor .

before_deploy:
  - rm -rf html_attribute_content/vendor
  - zip -r 'HTML-Attribute-Content' html_attribute_content

deploy:
  provider: releases
  api_key:
    secure: Pph1DBuuRkSPFd0N/hJXgISMqMdinJv6/jXTOylGI3T4Ber8C5rurqzIAX/J2CaSn/SM61oAfElzEaMzIE4iqlQhI+ZeveL6S7FNq2SbWjCe2YTuYcukHScozbFQjl6VUXPEM0bOXUVjbGWSUTbyh54RWknX7PC3xBKIbsUSx6E=
  file: "HTML-Attribute-Content.zip"
  skip_cleanup: true
  on:
    php: 7.1
    tags: true
    condition: $TRAVIS_PULL_REQUEST = false
    repo: expressionengine-add-ons/HTML-Attribute-Content
